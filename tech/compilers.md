## 3 词法分析

## 4 语法分析

### 4.1 引论

文法：某种语言的语法规约

语法分析器：从此词法分析器获得一个由词法单元组成的串，并验证改串可由源语言的文法生成

处理文法的语法分析器大致可分为三类：

- 通用的：Cocke-Younger-Kasami算法、Earler算法
- 自顶向下的
- 自底向上的

通用方法的效率很低，一般不能用于编译器，最高效的自顶向下及自底向上方法都只能处理某些文法子类，且其中的**LL、LR文法**足以描述现代编程语言的大部分语法构造，手工实现的语法分析器常用LL文法，LR文法类的分析器则通常用自动化工具构造而成。

#### 消除左递归

对于一个左递归的产生式：
$$
A \to A\alpha\ |\ \beta
$$
可以通过以下转换将左递归变成右递归：
$$
A \to \beta A^{’} \\
A^{’} \to \alpha A^{’}\ |\ \epsilon
$$
例如下面是几个指明运算符结合性和优先级的LR文法：
$$
E \to E + T\ |\ T \\
T \to T * F\ |\ F \\
F \to (E)\ |\ id
$$
把$+ T$、$* F$都看成一个整体，消除左递归得到：
$$
E \to TE^{'} \\
E^{'} \to +\ TE^{'}\ |\ \epsilon \\
T \to FT^{'} \\
T^{'} \to *\ FT^{'}\ |\ \epsilon \\
F \to (E)\ |\ id
$$

#### 错误恢复

检测到错误时，语法分析器的主要存在几种错误恢复策略：

- 恐慌模式恢复：
- 短语层次恢复：
- 错误产生式：
- 全局纠正：

### 4.2 上下文无关文法



